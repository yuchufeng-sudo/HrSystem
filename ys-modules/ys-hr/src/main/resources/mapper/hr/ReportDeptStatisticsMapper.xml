<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ys.hr.mapper.ReportDeptStatisticsMapper">

    <resultMap type="com.ys.hr.domain.vo.ReportDeptListVo" id="ReportLeaveListVoResult">
        <result property="employeeName"    column="full_name"    />
        <result property="position"    column="position"    />
        <result property="deptName"    column="dept_name"    />
        <result property="contactInfo"    column="email"    />
        <result property="country"    column="country"    />
        <result property="address1"    column="address1"    />
        <result property="address2"    column="address2"    />
        <result property="city"    column="city"    />
        <result property="province"    column="province"    />
        <result property="postCode"    column="post_code"    />
    </resultMap>

    <select id="selectDeptReportList" resultMap="ReportLeaveListVoResult">
        select he.full_name,hp.position_name,hd.dept_name,he.email,he.country,he.address1,
            he.address2,he.city,he.province,he.post_code
        from hr_employees he
            left join hr_dept_employees hde on he.employee_id = hde.employee_id
            left join hr_dept hd on hde.dept_id = hd.dept_id
            left join hr_position hp on hp.id = he.position
        where he.enterprise_id = #{enterpriseId}
        <if test="deptId!=null and deptId!=0">and hde.dept_id = #{deptId}</if>
    </select>
</mapper>
